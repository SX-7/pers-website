{% extends "layout.html" %} {% block content %}
<!-- Use this instead next time! https://alpinejs.dev/plugins/collapse -->
<div class="flex w-full flex-col gap-8 p-8 text-opium-200">
  {% for element_data in projects %}

  <div
    class="flex w-full flex-col"
    x-data="{maxContentHeight: 0, currContentHeight: 0, isOpen: false}"
    x-effect="isOpen ? currContentHeight = maxContentHeight : currContentHeight = 0"
  >
    <div
      class="select-none text-center rounded-lg bg-danube-800 z-10 shadow-md shadow-rangoon_green-700 p-2"
      @click="isOpen = !isOpen"
    >
      {{element_data['title']}}
    </div>
    <div
      x-init="createCSSSelector('.button{{element_data['id']}}cssclass','height:'+$el.getBoundingClientRect()['height']+'px')"
      class="mx-4 flex flex-col justify-end overflow-hidden rounded-b-md bg-slate-900 ring-2 ring-inset ring-danube-800"
      x-show="isOpen"
      x-collapse.duration.500ms
      x-cloak
    >
      <div>
        <div class="p-4">{% include 'data/projects/'+element_data["file_name"] %}</div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
